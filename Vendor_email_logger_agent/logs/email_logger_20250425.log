2025-04-25 20:29:09,155 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 20:29:09,155 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 20:29:09,155 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 20:29:09,155 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 20:29:09,155 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 20:29:09,155 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 20:29:09,156 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:09,157 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 20:29:09,324 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 20:29:10,270 - INFO - Found 39 messages
2025-04-25 20:29:10,615 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:10,616 - INFO - Is vendor: True
2025-04-25 20:29:10,617 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:29:11,260 - INFO - Email type: other
2025-04-25 20:29:12,387 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:29:13,920 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:13,926 - INFO - Generated embedding length: 1536
2025-04-25 20:29:13,926 - INFO - Generated summary length: 376
2025-04-25 20:29:14,640 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.19661e534867a709&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:29:17,503 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:17,505 - INFO - Generated response draft: 1505 characters
2025-04-25 20:29:17,610 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:29:17,611 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:17,611 - ERROR - Error details: APIError
2025-04-25 20:29:17,611 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:17,611 - ERROR - Error type: APIError
2025-04-25 20:29:17,625 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 20:29:17,625 - INFO - Processed email: 196675e9f37b6406
2025-04-25 20:29:18,323 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:18,323 - INFO - Is vendor: False
2025-04-25 20:29:18,323 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:18,629 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:18,629 - INFO - Is vendor: True
2025-04-25 20:29:18,629 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:29:19,245 - INFO - Email type: other
2025-04-25 20:29:20,066 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:29:21,396 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:21,398 - INFO - Generated embedding length: 1536
2025-04-25 20:29:21,398 - INFO - Generated summary length: 496
2025-04-25 20:29:21,438 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.19661e534867a709&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:29:23,870 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:23,872 - INFO - Generated response draft: 1102 characters
2025-04-25 20:29:23,933 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:29:23,933 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:23,934 - ERROR - Error details: APIError
2025-04-25 20:29:23,934 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:23,934 - ERROR - Error type: APIError
2025-04-25 20:29:23,935 - ERROR - Error sending message to MCP server: [Errno 32] Broken pipe
2025-04-25 20:29:23,935 - INFO - Processed email: 19661ecddae94e49
2025-04-25 20:29:24,300 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:24,300 - INFO - Is vendor: False
2025-04-25 20:29:24,300 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:24,633 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:24,633 - INFO - Is vendor: False
2025-04-25 20:29:24,633 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 20:29:24,925 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:24,926 - INFO - Is vendor: True
2025-04-25 20:29:24,926 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:29:25,896 - INFO - Email type: other
2025-04-25 20:29:26,532 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:29:28,359 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:28,361 - INFO - Generated embedding length: 1536
2025-04-25 20:29:28,361 - INFO - Generated summary length: 265
2025-04-25 20:29:29,493 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:29:29,577 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.1965e3ffd06abe66&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:29:31,329 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:31,331 - INFO - Generated response draft: 539 characters
2025-04-25 20:29:31,404 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:29:31,405 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:31,405 - ERROR - Error details: APIError
2025-04-25 20:29:31,405 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:31,405 - ERROR - Error type: APIError
2025-04-25 20:29:31,410 - INFO - Message sent to MCP server: purchase request
2025-04-25 20:29:31,410 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 20:29:31,737 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:31,738 - INFO - Is vendor: True
2025-04-25 20:29:31,738 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:29:32,455 - INFO - Email type: other
2025-04-25 20:29:33,480 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:29:34,607 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:34,609 - INFO - Generated embedding length: 1536
2025-04-25 20:29:34,609 - INFO - Generated summary length: 302
2025-04-25 20:29:35,835 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:29:35,895 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.1965e3ccd4a098a9&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:29:37,676 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:29:37,677 - INFO - Generated response draft: 834 characters
2025-04-25 20:29:37,767 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:29:37,767 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:37,768 - ERROR - Error details: APIError
2025-04-25 20:29:37,768 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:29:37,768 - ERROR - Error type: APIError
2025-04-25 20:29:37,768 - ERROR - Error sending message to MCP server: [Errno 32] Broken pipe
2025-04-25 20:29:37,769 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 20:29:38,087 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:38,087 - INFO - Is vendor: False
2025-04-25 20:29:38,087 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 20:29:38,394 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:38,395 - INFO - Is vendor: False
2025-04-25 20:29:38,395 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:38,700 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:38,701 - INFO - Is vendor: False
2025-04-25 20:29:38,701 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 20:29:39,111 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:39,111 - INFO - Is vendor: False
2025-04-25 20:29:39,111 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:39,417 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:39,418 - INFO - Is vendor: False
2025-04-25 20:29:39,418 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:29:39,724 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:39,724 - INFO - Is vendor: False
2025-04-25 20:29:39,724 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:29:40,031 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:40,031 - INFO - Is vendor: False
2025-04-25 20:29:40,031 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:29:40,339 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:40,339 - INFO - Is vendor: False
2025-04-25 20:29:40,340 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:40,749 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:40,749 - INFO - Is vendor: False
2025-04-25 20:29:40,749 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:41,158 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:41,158 - INFO - Is vendor: False
2025-04-25 20:29:41,158 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:41,569 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:41,570 - INFO - Is vendor: False
2025-04-25 20:29:41,570 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 20:29:41,978 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:41,979 - INFO - Is vendor: False
2025-04-25 20:29:41,979 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 20:29:42,288 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:42,289 - INFO - Is vendor: False
2025-04-25 20:29:42,289 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:42,594 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:42,594 - INFO - Is vendor: False
2025-04-25 20:29:42,594 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:43,002 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:43,003 - INFO - Is vendor: False
2025-04-25 20:29:43,003 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:43,308 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:43,309 - INFO - Is vendor: False
2025-04-25 20:29:43,309 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:43,618 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:43,618 - INFO - Is vendor: False
2025-04-25 20:29:43,618 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:44,026 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:44,026 - INFO - Is vendor: False
2025-04-25 20:29:44,027 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 20:29:44,333 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:44,333 - INFO - Is vendor: False
2025-04-25 20:29:44,333 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:44,622 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:44,622 - INFO - Is vendor: False
2025-04-25 20:29:44,622 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 20:29:44,907 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:44,907 - INFO - Is vendor: False
2025-04-25 20:29:44,907 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 20:29:45,225 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:45,225 - INFO - Is vendor: False
2025-04-25 20:29:45,225 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:45,562 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:45,562 - INFO - Is vendor: False
2025-04-25 20:29:45,562 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:45,871 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:45,871 - INFO - Is vendor: False
2025-04-25 20:29:45,872 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:46,192 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:46,193 - INFO - Is vendor: False
2025-04-25 20:29:46,193 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:46,483 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:46,483 - INFO - Is vendor: False
2025-04-25 20:29:46,483 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:46,763 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:46,763 - INFO - Is vendor: False
2025-04-25 20:29:46,763 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:29:47,046 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:47,046 - INFO - Is vendor: False
2025-04-25 20:29:47,046 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:29:47,326 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:47,326 - INFO - Is vendor: False
2025-04-25 20:29:47,326 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 20:29:47,605 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:47,605 - INFO - Is vendor: False
2025-04-25 20:29:47,605 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 20:29:47,884 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:47,884 - INFO - Is vendor: False
2025-04-25 20:29:47,884 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 20:29:48,160 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:29:48,160 - INFO - Is vendor: False
2025-04-25 20:29:48,160 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 20:52:59,170 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10b7b7aa0>
2025-04-25 20:53:01,682 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 20:53:01,682 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 20:53:01,682 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 20:53:01,682 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 20:53:01,682 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 20:53:01,682 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 20:53:01,682 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:01,684 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 20:53:01,852 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 20:53:02,672 - INFO - Found 39 messages
2025-04-25 20:53:03,081 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:03,082 - INFO - Is vendor: True
2025-04-25 20:53:03,082 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:53:03,798 - INFO - Email type: other
2025-04-25 20:53:04,623 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:53:06,153 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:53:06,165 - INFO - Generated embedding length: 1536
2025-04-25 20:53:06,165 - INFO - Generated summary length: 426
2025-04-25 20:53:06,574 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.19661e534867a709&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:53:06,581 - INFO - Generated response draft: 0 characters
2025-04-25 20:53:06,651 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:53:06,652 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:06,652 - ERROR - Error details: APIError
2025-04-25 20:53:06,652 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:06,652 - ERROR - Error type: APIError
2025-04-25 20:53:06,662 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 20:53:06,662 - INFO - Processed email: 196675e9f37b6406
2025-04-25 20:53:06,947 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:06,947 - INFO - Is vendor: False
2025-04-25 20:53:06,947 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:07,241 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:07,241 - INFO - Is vendor: True
2025-04-25 20:53:07,241 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:53:07,894 - INFO - Email type: other
2025-04-25 20:53:08,612 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:53:10,222 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:53:10,230 - INFO - Generated embedding length: 1536
2025-04-25 20:53:10,230 - INFO - Generated summary length: 585
2025-04-25 20:53:10,294 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.19661e534867a709&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:53:10,298 - INFO - Generated response draft: 0 characters
2025-04-25 20:53:10,368 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:53:10,370 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:10,370 - ERROR - Error details: APIError
2025-04-25 20:53:10,370 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:10,370 - ERROR - Error type: APIError
2025-04-25 20:53:10,373 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 20:53:10,374 - INFO - Processed email: 19661ecddae94e49
2025-04-25 20:53:10,760 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:10,760 - INFO - Is vendor: False
2025-04-25 20:53:10,760 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:11,056 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:11,057 - INFO - Is vendor: False
2025-04-25 20:53:11,057 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 20:53:11,374 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:11,374 - INFO - Is vendor: True
2025-04-25 20:53:11,374 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:53:11,990 - INFO - Email type: other
2025-04-25 20:53:12,809 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:53:13,746 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:53:13,747 - INFO - Generated embedding length: 1536
2025-04-25 20:53:13,748 - INFO - Generated summary length: 270
2025-04-25 20:53:14,693 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:53:14,754 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.1965e3ffd06abe66&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:53:14,756 - INFO - Generated response draft: 0 characters
2025-04-25 20:53:14,818 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:53:14,819 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:14,819 - ERROR - Error details: APIError
2025-04-25 20:53:14,819 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:14,819 - ERROR - Error type: APIError
2025-04-25 20:53:14,821 - INFO - Message sent to MCP server: purchase request
2025-04-25 20:53:14,821 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 20:53:15,115 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:15,115 - INFO - Is vendor: True
2025-04-25 20:53:15,115 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:53:16,091 - INFO - Email type: other
2025-04-25 20:53:16,684 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:53:17,703 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:53:17,704 - INFO - Generated embedding length: 1536
2025-04-25 20:53:17,704 - INFO - Generated summary length: 240
2025-04-25 20:53:18,443 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:53:18,490 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.1965e3ccd4a098a9&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:53:18,493 - INFO - Generated response draft: 0 characters
2025-04-25 20:53:18,540 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:53:18,540 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:18,540 - ERROR - Error details: APIError
2025-04-25 20:53:18,540 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:53:18,540 - ERROR - Error type: APIError
2025-04-25 20:53:18,543 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 20:53:18,543 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 20:53:18,851 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:18,851 - INFO - Is vendor: False
2025-04-25 20:53:18,851 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 20:53:19,157 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:19,157 - INFO - Is vendor: False
2025-04-25 20:53:19,157 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:19,437 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:19,438 - INFO - Is vendor: False
2025-04-25 20:53:19,438 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 20:53:19,771 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:19,771 - INFO - Is vendor: False
2025-04-25 20:53:19,771 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:20,488 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:20,489 - INFO - Is vendor: False
2025-04-25 20:53:20,489 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:53:20,795 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:20,795 - INFO - Is vendor: False
2025-04-25 20:53:20,796 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:53:21,512 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:21,513 - INFO - Is vendor: False
2025-04-25 20:53:21,513 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:53:22,230 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:22,230 - INFO - Is vendor: False
2025-04-25 20:53:22,230 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:22,640 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:22,640 - INFO - Is vendor: False
2025-04-25 20:53:22,640 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:22,947 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:22,948 - INFO - Is vendor: False
2025-04-25 20:53:22,948 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:23,253 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:23,254 - INFO - Is vendor: False
2025-04-25 20:53:23,254 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 20:53:23,662 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:23,662 - INFO - Is vendor: False
2025-04-25 20:53:23,662 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 20:53:23,971 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:23,972 - INFO - Is vendor: False
2025-04-25 20:53:23,972 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:24,279 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:24,279 - INFO - Is vendor: False
2025-04-25 20:53:24,280 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:24,568 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:24,568 - INFO - Is vendor: False
2025-04-25 20:53:24,568 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:24,892 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:24,892 - INFO - Is vendor: False
2025-04-25 20:53:24,892 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:25,199 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:25,199 - INFO - Is vendor: False
2025-04-25 20:53:25,199 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:25,497 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:25,497 - INFO - Is vendor: False
2025-04-25 20:53:25,497 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 20:53:25,792 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:25,792 - INFO - Is vendor: False
2025-04-25 20:53:25,792 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:26,121 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:26,122 - INFO - Is vendor: False
2025-04-25 20:53:26,122 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 20:53:26,406 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:26,406 - INFO - Is vendor: False
2025-04-25 20:53:26,406 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 20:53:26,736 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:26,736 - INFO - Is vendor: False
2025-04-25 20:53:26,736 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:27,032 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:27,032 - INFO - Is vendor: False
2025-04-25 20:53:27,032 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:27,318 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:27,318 - INFO - Is vendor: False
2025-04-25 20:53:27,318 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:27,609 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:27,610 - INFO - Is vendor: False
2025-04-25 20:53:27,610 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:27,892 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:27,893 - INFO - Is vendor: False
2025-04-25 20:53:27,893 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:28,173 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:28,173 - INFO - Is vendor: False
2025-04-25 20:53:28,173 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:53:28,578 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:28,579 - INFO - Is vendor: False
2025-04-25 20:53:28,579 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:53:29,295 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:29,296 - INFO - Is vendor: False
2025-04-25 20:53:29,296 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 20:53:29,590 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:29,590 - INFO - Is vendor: False
2025-04-25 20:53:29,590 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 20:53:29,910 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:29,910 - INFO - Is vendor: False
2025-04-25 20:53:29,910 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 20:53:30,217 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:53:30,218 - INFO - Is vendor: False
2025-04-25 20:53:30,218 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 20:54:18,116 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x108490aa0>
2025-04-25 20:59:20,987 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 20:59:20,987 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 20:59:20,988 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 20:59:20,988 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 20:59:20,988 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 20:59:20,988 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 20:59:20,988 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:20,989 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 20:59:21,164 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 20:59:24,540 - INFO - Found 39 messages
2025-04-25 20:59:24,853 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:24,854 - INFO - Is vendor: True
2025-04-25 20:59:24,854 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:59:25,485 - INFO - Email type: other
2025-04-25 20:59:27,099 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:59:28,371 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:59:28,381 - INFO - Generated embedding length: 1536
2025-04-25 20:59:28,381 - INFO - Generated summary length: 440
2025-04-25 20:59:28,940 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.19661e534867a709&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:59:28,948 - INFO - Generated response draft: 0 characters
2025-04-25 20:59:29,007 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:59:29,007 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:29,007 - ERROR - Error details: APIError
2025-04-25 20:59:29,007 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:29,008 - ERROR - Error type: APIError
2025-04-25 20:59:29,013 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 20:59:29,013 - INFO - Processed email: 196675e9f37b6406
2025-04-25 20:59:29,351 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:29,351 - INFO - Is vendor: False
2025-04-25 20:59:29,351 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:29,759 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:29,760 - INFO - Is vendor: True
2025-04-25 20:59:29,760 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:59:30,583 - INFO - Email type: other
2025-04-25 20:59:31,094 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:59:32,833 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:59:32,835 - INFO - Generated embedding length: 1536
2025-04-25 20:59:32,835 - INFO - Generated summary length: 581
2025-04-25 20:59:32,889 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.19661e534867a709&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:59:32,893 - INFO - Generated response draft: 0 characters
2025-04-25 20:59:32,941 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:59:32,942 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:32,942 - ERROR - Error details: APIError
2025-04-25 20:59:32,943 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:32,943 - ERROR - Error type: APIError
2025-04-25 20:59:32,946 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 20:59:32,946 - INFO - Processed email: 19661ecddae94e49
2025-04-25 20:59:33,344 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:33,344 - INFO - Is vendor: False
2025-04-25 20:59:33,344 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:33,752 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:33,752 - INFO - Is vendor: False
2025-04-25 20:59:33,752 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 20:59:34,499 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:34,500 - INFO - Is vendor: True
2025-04-25 20:59:34,500 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:59:35,188 - INFO - Email type: other
2025-04-25 20:59:35,701 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:59:36,826 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:59:36,827 - INFO - Generated embedding length: 1536
2025-04-25 20:59:36,828 - INFO - Generated summary length: 304
2025-04-25 20:59:38,363 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:59:38,450 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.1965e3ffd06abe66&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:59:38,454 - INFO - Generated response draft: 0 characters
2025-04-25 20:59:38,514 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:59:38,515 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:38,515 - ERROR - Error details: APIError
2025-04-25 20:59:38,515 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:38,515 - ERROR - Error type: APIError
2025-04-25 20:59:38,516 - ERROR - Error sending message to MCP server: [Errno 32] Broken pipe
2025-04-25 20:59:38,516 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 20:59:38,874 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:38,874 - INFO - Is vendor: True
2025-04-25 20:59:38,874 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 20:59:39,491 - INFO - Email type: other
2025-04-25 20:59:40,205 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:59:41,741 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 20:59:41,741 - INFO - Generated embedding length: 1536
2025-04-25 20:59:41,741 - INFO - Generated summary length: 282
2025-04-25 20:59:43,278 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 20:59:43,329 - INFO - HTTP Request: GET https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs?select=%2A&thread_id=eq.1965e3ccd4a098a9&order=sent_at "HTTP/1.1 200 OK"
2025-04-25 20:59:43,332 - INFO - Generated response draft: 0 characters
2025-04-25 20:59:43,398 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 20:59:43,398 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:43,398 - ERROR - Error details: APIError
2025-04-25 20:59:43,398 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 20:59:43,398 - ERROR - Error type: APIError
2025-04-25 20:59:43,402 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 20:59:43,402 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 20:59:43,713 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:43,713 - INFO - Is vendor: False
2025-04-25 20:59:43,713 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 20:59:44,022 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:44,023 - INFO - Is vendor: False
2025-04-25 20:59:44,023 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:44,326 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:44,326 - INFO - Is vendor: False
2025-04-25 20:59:44,326 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 20:59:44,711 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:44,711 - INFO - Is vendor: False
2025-04-25 20:59:44,712 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:45,120 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:45,121 - INFO - Is vendor: False
2025-04-25 20:59:45,121 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:59:45,530 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:45,530 - INFO - Is vendor: False
2025-04-25 20:59:45,530 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:59:45,835 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:45,835 - INFO - Is vendor: False
2025-04-25 20:59:45,836 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 20:59:46,144 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:46,144 - INFO - Is vendor: False
2025-04-25 20:59:46,144 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:46,844 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:46,844 - INFO - Is vendor: False
2025-04-25 20:59:46,844 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:59:47,148 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:47,148 - INFO - Is vendor: False
2025-04-25 20:59:47,148 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:47,471 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:47,471 - INFO - Is vendor: False
2025-04-25 20:59:47,472 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 20:59:47,885 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:47,885 - INFO - Is vendor: False
2025-04-25 20:59:47,886 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 20:59:48,198 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:48,199 - INFO - Is vendor: False
2025-04-25 20:59:48,199 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:59:48,499 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:48,499 - INFO - Is vendor: False
2025-04-25 20:59:48,499 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:48,910 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:48,910 - INFO - Is vendor: False
2025-04-25 20:59:48,910 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:49,200 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:49,200 - INFO - Is vendor: False
2025-04-25 20:59:49,200 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:49,933 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:49,934 - INFO - Is vendor: False
2025-04-25 20:59:49,934 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:50,235 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:50,235 - INFO - Is vendor: False
2025-04-25 20:59:50,235 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 20:59:50,548 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:50,548 - INFO - Is vendor: False
2025-04-25 20:59:50,548 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 20:59:50,957 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:50,957 - INFO - Is vendor: False
2025-04-25 20:59:50,957 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 20:59:51,264 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:51,264 - INFO - Is vendor: False
2025-04-25 20:59:51,264 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 20:59:51,674 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:51,675 - INFO - Is vendor: False
2025-04-25 20:59:51,675 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:59:51,981 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:51,981 - INFO - Is vendor: False
2025-04-25 20:59:51,981 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:59:52,282 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:52,282 - INFO - Is vendor: False
2025-04-25 20:59:52,282 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:59:54,885 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 20:59:54,886 - INFO - Is vendor: False
2025-04-25 20:59:54,886 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 20:59:55,091 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10c3d7c80>
2025-04-25 21:17:29,646 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:17:29,647 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:17:29,647 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:17:29,647 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:17:29,647 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:17:29,647 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:17:29,647 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:29,649 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:17:29,818 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:17:30,744 - INFO - Found 39 messages
2025-04-25 21:17:31,034 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:31,034 - INFO - Is vendor: True
2025-04-25 21:17:31,035 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:17:32,346 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:17:33,408 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:17:33,415 - INFO - Generated summary length: 68
2025-04-25 21:17:33,415 - INFO - Generated email type: delay
2025-04-25 21:17:33,919 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:17:33,921 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:33,921 - ERROR - Error details: APIError
2025-04-25 21:17:33,921 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:33,921 - ERROR - Error type: APIError
2025-04-25 21:17:33,927 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:17:33,928 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:17:34,227 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:34,227 - INFO - Is vendor: False
2025-04-25 21:17:34,228 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:34,532 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:34,532 - INFO - Is vendor: True
2025-04-25 21:17:34,532 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:17:35,677 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:17:36,888 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:17:36,889 - INFO - Generated summary length: 101
2025-04-25 21:17:36,889 - INFO - Generated email type: confirmation
2025-04-25 21:17:36,946 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:17:36,947 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:36,947 - ERROR - Error details: APIError
2025-04-25 21:17:36,947 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:36,947 - ERROR - Error type: APIError
2025-04-25 21:17:36,950 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:17:36,950 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:17:37,241 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:37,241 - INFO - Is vendor: False
2025-04-25 21:17:37,241 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:37,617 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:37,617 - INFO - Is vendor: False
2025-04-25 21:17:37,617 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:17:37,912 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:37,913 - INFO - Is vendor: True
2025-04-25 21:17:37,913 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:17:39,040 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:17:39,740 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:17:39,741 - INFO - Generated summary length: 23
2025-04-25 21:17:39,741 - INFO - Generated email type: inquiry
2025-04-25 21:17:40,669 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:17:40,716 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:17:40,716 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:40,716 - ERROR - Error details: APIError
2025-04-25 21:17:40,717 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:40,717 - ERROR - Error type: APIError
2025-04-25 21:17:40,718 - INFO - Message sent to MCP server: purchase request
2025-04-25 21:17:40,718 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 21:17:41,023 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:41,023 - INFO - Is vendor: True
2025-04-25 21:17:41,023 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:17:42,718 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:17:43,407 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:17:43,408 - INFO - Generated summary length: 52
2025-04-25 21:17:43,408 - INFO - Generated email type: inquiry
2025-04-25 21:17:44,253 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:17:44,299 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:17:44,300 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:44,300 - ERROR - Error details: APIError
2025-04-25 21:17:44,300 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:17:44,300 - ERROR - Error type: APIError
2025-04-25 21:17:44,303 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 21:17:44,303 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 21:17:44,671 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:44,671 - INFO - Is vendor: False
2025-04-25 21:17:44,671 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:17:44,978 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:44,978 - INFO - Is vendor: False
2025-04-25 21:17:44,978 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:45,696 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:45,696 - INFO - Is vendor: False
2025-04-25 21:17:45,696 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:17:46,001 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:46,001 - INFO - Is vendor: False
2025-04-25 21:17:46,002 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:46,286 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:46,286 - INFO - Is vendor: False
2025-04-25 21:17:46,286 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:17:46,617 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:46,617 - INFO - Is vendor: False
2025-04-25 21:17:46,617 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:17:47,296 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:47,297 - INFO - Is vendor: False
2025-04-25 21:17:47,297 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:17:47,640 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:47,640 - INFO - Is vendor: False
2025-04-25 21:17:47,641 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:47,948 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:47,948 - INFO - Is vendor: False
2025-04-25 21:17:47,948 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:17:48,255 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:48,256 - INFO - Is vendor: False
2025-04-25 21:17:48,256 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:48,552 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:48,552 - INFO - Is vendor: False
2025-04-25 21:17:48,552 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:17:48,873 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:48,873 - INFO - Is vendor: False
2025-04-25 21:17:48,873 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:17:49,193 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:49,193 - INFO - Is vendor: False
2025-04-25 21:17:49,193 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:17:49,485 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:49,485 - INFO - Is vendor: False
2025-04-25 21:17:49,486 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:49,790 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:49,791 - INFO - Is vendor: False
2025-04-25 21:17:49,791 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:50,098 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:50,098 - INFO - Is vendor: False
2025-04-25 21:17:50,098 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:50,380 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:17:50,380 - INFO - Is vendor: False
2025-04-25 21:17:50,380 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:17:50,568 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10d100170>
2025-04-25 21:18:27,110 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:18:27,110 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:18:27,110 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:18:27,110 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:18:27,110 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:18:27,110 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:18:27,110 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:27,112 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:18:27,285 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:18:28,029 - INFO - Found 39 messages
2025-04-25 21:18:28,736 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:28,736 - INFO - Is vendor: True
2025-04-25 21:18:28,737 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:18:30,083 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:18:30,785 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:18:30,791 - INFO - Generated summary length: 68
2025-04-25 21:18:30,791 - INFO - Generated email type: delay
2025-04-25 21:18:30,886 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:18:30,886 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:18:30,886 - ERROR - Error details: APIError
2025-04-25 21:18:30,886 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:18:30,886 - ERROR - Error type: APIError
2025-04-25 21:18:30,890 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:18:30,890 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:18:31,265 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:31,265 - INFO - Is vendor: False
2025-04-25 21:18:31,266 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:18:31,675 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:31,675 - INFO - Is vendor: True
2025-04-25 21:18:31,675 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:18:33,008 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:18:33,826 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:18:33,828 - INFO - Generated summary length: 93
2025-04-25 21:18:33,828 - INFO - Generated email type: confirmation
2025-04-25 21:18:33,878 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:18:33,879 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:18:33,880 - ERROR - Error details: APIError
2025-04-25 21:18:33,880 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:18:33,880 - ERROR - Error type: APIError
2025-04-25 21:18:33,883 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:18:33,883 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:18:34,235 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:34,236 - INFO - Is vendor: False
2025-04-25 21:18:34,236 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:18:34,644 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:34,645 - INFO - Is vendor: False
2025-04-25 21:18:34,645 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:18:34,957 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:34,958 - INFO - Is vendor: True
2025-04-25 21:18:34,958 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:18:36,183 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:18:37,002 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:18:37,003 - INFO - Generated summary length: 33
2025-04-25 21:18:37,003 - INFO - Generated email type: inquiry
2025-04-25 21:18:38,435 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:18:38,486 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 400 Bad Request"
2025-04-25 21:18:38,487 - ERROR - Supabase insert error: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:18:38,487 - ERROR - Error details: APIError
2025-04-25 21:18:38,487 - ERROR - Error saving email log: {'code': 'PGRST204', 'details': None, 'hint': None, 'message': "Could not find the 'embedding' column of 'email_logs' in the schema cache"}
2025-04-25 21:18:38,487 - ERROR - Error type: APIError
2025-04-25 21:18:38,490 - INFO - Message sent to MCP server: purchase request
2025-04-25 21:18:38,491 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 21:18:38,843 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:18:38,843 - INFO - Is vendor: True
2025-04-25 21:18:38,843 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:18:39,894 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:18:40,298 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10d0badb0>
2025-04-25 21:18:40,298 - ERROR - Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x10c400dd0>, 222852.84388325)]']
connector: <aiohttp.connector.TCPConnector object at 0x10c25aab0>
2025-04-25 21:19:46,369 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:19:46,369 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:19:46,369 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:19:46,369 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:19:46,369 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:19:46,369 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:19:46,369 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:46,371 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:19:46,537 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:19:47,352 - INFO - Found 39 messages
2025-04-25 21:19:47,662 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:47,662 - INFO - Is vendor: True
2025-04-25 21:19:47,662 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:19:49,098 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:19:49,913 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:19:49,921 - INFO - Generated summary length: 88
2025-04-25 21:19:49,922 - INFO - Generated email type: order
2025-04-25 21:19:50,424 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 409 Conflict"
2025-04-25 21:19:50,425 - ERROR - Supabase insert error: {'code': '23505', 'details': 'Key (id)=(81) already exists.', 'hint': None, 'message': 'duplicate key value violates unique constraint "email_logs_pkey"'}
2025-04-25 21:19:50,425 - ERROR - Error details: APIError
2025-04-25 21:19:50,425 - ERROR - Error saving email log: {'code': '23505', 'details': 'Key (id)=(81) already exists.', 'hint': None, 'message': 'duplicate key value violates unique constraint "email_logs_pkey"'}
2025-04-25 21:19:50,425 - ERROR - Error type: APIError
2025-04-25 21:19:50,432 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:19:50,432 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:19:50,837 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:50,837 - INFO - Is vendor: False
2025-04-25 21:19:50,838 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:19:51,550 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:51,550 - INFO - Is vendor: True
2025-04-25 21:19:51,550 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:19:52,781 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:19:53,601 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:19:53,603 - INFO - Generated summary length: 71
2025-04-25 21:19:53,603 - INFO - Generated email type: confirmation
2025-04-25 21:19:53,651 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 409 Conflict"
2025-04-25 21:19:53,652 - ERROR - Supabase insert error: {'code': '23505', 'details': 'Key (id)=(82) already exists.', 'hint': None, 'message': 'duplicate key value violates unique constraint "email_logs_pkey"'}
2025-04-25 21:19:53,652 - ERROR - Error details: APIError
2025-04-25 21:19:53,652 - ERROR - Error saving email log: {'code': '23505', 'details': 'Key (id)=(82) already exists.', 'hint': None, 'message': 'duplicate key value violates unique constraint "email_logs_pkey"'}
2025-04-25 21:19:53,652 - ERROR - Error type: APIError
2025-04-25 21:19:53,655 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:19:53,655 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:19:54,010 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:54,010 - INFO - Is vendor: False
2025-04-25 21:19:54,010 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:19:54,317 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:54,317 - INFO - Is vendor: False
2025-04-25 21:19:54,317 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:19:54,623 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:19:54,623 - INFO - Is vendor: True
2025-04-25 21:19:54,623 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:19:55,914 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x1083e98b0>
2025-04-25 21:19:55,914 - ERROR - Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x109b90e30>, 222928.006418125)]']
connector: <aiohttp.connector.TCPConnector object at 0x109b8bd10>
2025-04-25 21:23:19,662 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:23:19,662 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:23:19,662 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:23:19,662 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:23:19,662 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:23:19,662 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:23:19,662 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:23:19,664 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:23:19,833 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:23:20,661 - INFO - Found 39 messages
2025-04-25 21:23:20,968 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:23:20,968 - INFO - Is vendor: True
2025-04-25 21:23:20,968 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:23:21,997 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:23:26,908 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:23:26,913 - INFO - Generated summary length: 101
2025-04-25 21:23:26,913 - INFO - Generated email type: update
2025-04-25 21:23:27,421 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 409 Conflict"
2025-04-25 21:23:27,422 - ERROR - Supabase insert error: {'code': '23505', 'details': 'Key (id)=(83) already exists.', 'hint': None, 'message': 'duplicate key value violates unique constraint "email_logs_pkey"'}
2025-04-25 21:23:27,423 - ERROR - Error details: APIError
2025-04-25 21:23:27,423 - ERROR - Error saving email log: {'code': '23505', 'details': 'Key (id)=(83) already exists.', 'hint': None, 'message': 'duplicate key value violates unique constraint "email_logs_pkey"'}
2025-04-25 21:23:27,423 - ERROR - Error type: APIError
2025-04-25 21:23:27,430 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:23:27,430 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:23:27,727 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:23:27,728 - INFO - Is vendor: False
2025-04-25 21:23:27,728 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:23:28,014 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:23:28,015 - INFO - Is vendor: True
2025-04-25 21:23:28,015 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:23:29,059 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:23:29,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:23:29,881 - INFO - Generated summary length: 70
2025-04-25 21:23:29,881 - INFO - Generated email type: confirmation
2025-04-25 21:23:29,924 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:23:29,930 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:23:29,987 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x108d42120>
2025-04-25 21:37:45,671 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:37:45,671 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:37:45,671 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:37:45,671 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:37:45,671 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:37:45,671 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:37:45,671 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:45,673 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:37:45,849 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:37:47,313 - INFO - Found 39 messages
2025-04-25 21:37:48,132 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:48,132 - INFO - Is vendor: True
2025-04-25 21:37:48,133 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:37:50,183 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:37:51,105 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:37:51,112 - INFO - Generated summary length: 101
2025-04-25 21:37:51,112 - INFO - Generated email type: update
2025-04-25 21:37:52,126 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:37:52,128 - ERROR - Invalid date format: 가장 최근의 배송 날짜는 2025년 4월 30일입니다. 이를 YYYY-MM-DD 형식으로 변환하면 2025-04-30이 됩니다.
2025-04-25 21:37:52,946 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:37:52,954 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:37:52,965 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:37:52,965 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:37:53,356 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:53,357 - INFO - Is vendor: False
2025-04-25 21:37:53,357 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:37:53,765 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:53,766 - INFO - Is vendor: True
2025-04-25 21:37:53,766 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:37:54,790 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:37:55,612 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:37:55,614 - INFO - Generated summary length: 71
2025-04-25 21:37:55,614 - INFO - Generated email type: order
2025-04-25 21:37:56,736 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:37:56,738 - ERROR - Invalid date format: 가장 최근의 배송 날짜는 2025년 4월 30일입니다. 따라서 YYYY-MM-DD 형식으로 반환하면 "2025-04-30"이 됩니다.
2025-04-25 21:37:56,809 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:37:56,813 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:37:56,816 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:37:56,817 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:37:57,144 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:57,145 - INFO - Is vendor: False
2025-04-25 21:37:57,145 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:37:57,555 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:57,555 - INFO - Is vendor: False
2025-04-25 21:37:57,555 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:37:58,272 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:37:58,272 - INFO - Is vendor: True
2025-04-25 21:37:58,272 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:37:59,705 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:38:00,319 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:38:00,320 - INFO - Generated summary length: 33
2025-04-25 21:38:00,320 - INFO - Generated email type: inquiry
2025-04-25 21:38:01,651 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:38:02,256 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:38:02,345 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:38:02,349 - INFO - Email saved: purchase request
2025-04-25 21:38:02,405 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:38:02,406 - ERROR - Error saving attachment: {}
2025-04-25 21:38:02,406 - ERROR - Error saving email log: {}
2025-04-25 21:38:02,407 - ERROR - Error type: APIError
2025-04-25 21:38:02,408 - ERROR - Error sending message to MCP server: [Errno 32] Broken pipe
2025-04-25 21:38:02,408 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 21:38:02,712 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:02,712 - INFO - Is vendor: True
2025-04-25 21:38:02,712 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:38:04,449 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:38:05,262 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:38:05,268 - INFO - Generated summary length: 52
2025-04-25 21:38:05,269 - INFO - Generated email type: inquiry
2025-04-25 21:38:06,463 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:38:07,106 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:38:07,165 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:38:07,169 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 21:38:07,203 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:38:07,204 - ERROR - Error saving attachment: {}
2025-04-25 21:38:07,204 - ERROR - Error saving email log: {}
2025-04-25 21:38:07,204 - ERROR - Error type: APIError
2025-04-25 21:38:07,208 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 21:38:07,208 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 21:38:07,588 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:07,589 - INFO - Is vendor: False
2025-04-25 21:38:07,589 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:38:08,408 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:08,408 - INFO - Is vendor: False
2025-04-25 21:38:08,408 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:09,123 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:09,123 - INFO - Is vendor: False
2025-04-25 21:38:09,123 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:38:09,429 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:09,429 - INFO - Is vendor: False
2025-04-25 21:38:09,430 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:09,841 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:09,841 - INFO - Is vendor: False
2025-04-25 21:38:09,842 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:38:10,250 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:10,251 - INFO - Is vendor: False
2025-04-25 21:38:10,251 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:38:11,070 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:11,071 - INFO - Is vendor: False
2025-04-25 21:38:11,071 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:38:11,378 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:11,378 - INFO - Is vendor: False
2025-04-25 21:38:11,378 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:11,694 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:11,694 - INFO - Is vendor: False
2025-04-25 21:38:11,694 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:12,402 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:12,402 - INFO - Is vendor: False
2025-04-25 21:38:12,402 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:12,810 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:12,810 - INFO - Is vendor: False
2025-04-25 21:38:12,811 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:38:13,541 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:13,542 - INFO - Is vendor: False
2025-04-25 21:38:13,542 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:38:14,347 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:14,347 - INFO - Is vendor: False
2025-04-25 21:38:14,347 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:14,654 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:14,654 - INFO - Is vendor: False
2025-04-25 21:38:14,654 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:15,065 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:15,065 - INFO - Is vendor: False
2025-04-25 21:38:15,065 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:15,781 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:15,781 - INFO - Is vendor: False
2025-04-25 21:38:15,781 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:16,498 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:16,498 - INFO - Is vendor: False
2025-04-25 21:38:16,498 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:17,214 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:17,214 - INFO - Is vendor: False
2025-04-25 21:38:17,215 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 21:38:17,518 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:17,518 - INFO - Is vendor: False
2025-04-25 21:38:17,518 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:18,240 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:18,241 - INFO - Is vendor: False
2025-04-25 21:38:18,241 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:38:18,955 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:18,955 - INFO - Is vendor: False
2025-04-25 21:38:18,956 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 21:38:19,365 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:19,365 - INFO - Is vendor: False
2025-04-25 21:38:19,365 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:19,774 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:19,774 - INFO - Is vendor: False
2025-04-25 21:38:19,774 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:20,098 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:20,099 - INFO - Is vendor: False
2025-04-25 21:38:20,099 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:20,828 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:20,829 - INFO - Is vendor: False
2025-04-25 21:38:20,829 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:21,213 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:21,213 - INFO - Is vendor: False
2025-04-25 21:38:21,213 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:21,517 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:21,518 - INFO - Is vendor: False
2025-04-25 21:38:21,518 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:38:21,823 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:21,823 - INFO - Is vendor: False
2025-04-25 21:38:21,823 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:38:22,113 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:22,113 - INFO - Is vendor: False
2025-04-25 21:38:22,113 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 21:38:22,846 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:22,846 - INFO - Is vendor: False
2025-04-25 21:38:22,847 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:38:23,149 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:23,149 - INFO - Is vendor: False
2025-04-25 21:38:23,149 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:38:23,462 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:38:23,462 - INFO - Is vendor: False
2025-04-25 21:38:23,462 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:38:23,462 - INFO - GmailWatcher initialized
2025-04-25 21:40:50,036 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10a3998b0>
2025-04-25 21:51:51,471 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:51:51,472 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:51:51,472 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:51:51,472 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:51:51,472 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:51:51,472 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:51:51,472 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:51:51,474 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:51:51,648 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:51:52,664 - INFO - Found 39 messages
2025-04-25 21:51:53,073 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:51:53,073 - INFO - Is vendor: True
2025-04-25 21:51:53,073 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:51:54,408 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:51:55,120 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:51:55,126 - INFO - Generated summary length: 59
2025-04-25 21:51:55,127 - INFO - Generated email type: update
2025-04-25 21:51:56,249 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:51:56,252 - ERROR - Invalid date format: The latest delivery date mentioned in the document is: 2025-04-30
2025-04-25 21:51:56,864 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:51:56,871 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:51:56,881 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:51:56,881 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:51:57,273 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:51:57,273 - INFO - Is vendor: False
2025-04-25 21:51:57,273 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:51:57,681 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:51:57,682 - INFO - Is vendor: True
2025-04-25 21:51:57,682 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:51:59,321 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:52:00,243 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:52:00,245 - INFO - Generated summary length: 96
2025-04-25 21:52:00,245 - INFO - Generated email type: confirmation
2025-04-25 21:52:01,060 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:52:01,061 - ERROR - Invalid date format: The latest delivery date mentioned in the document is: 2025-04-30
2025-04-25 21:52:01,110 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:52:01,112 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:52:01,114 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:52:01,114 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:52:01,472 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:01,472 - INFO - Is vendor: False
2025-04-25 21:52:01,472 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:01,879 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:01,880 - INFO - Is vendor: False
2025-04-25 21:52:01,880 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:52:02,292 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:02,293 - INFO - Is vendor: True
2025-04-25 21:52:02,293 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:52:03,513 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:52:04,235 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:52:04,235 - INFO - Generated summary length: 33
2025-04-25 21:52:04,236 - INFO - Generated email type: inquiry
2025-04-25 21:52:05,212 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:52:05,977 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:52:06,042 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:52:06,044 - INFO - Email saved: purchase request
2025-04-25 21:52:06,090 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:52:06,091 - ERROR - Error saving attachment: {}
2025-04-25 21:52:06,091 - ERROR - Error saving email log: {}
2025-04-25 21:52:06,091 - ERROR - Error type: APIError
2025-04-25 21:52:06,092 - INFO - Message sent to MCP server: purchase request
2025-04-25 21:52:06,092 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 21:52:06,488 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:06,488 - INFO - Is vendor: True
2025-04-25 21:52:06,488 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:52:07,789 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:52:08,901 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:52:08,902 - INFO - Generated summary length: 64
2025-04-25 21:52:08,902 - INFO - Generated email type: request
2025-04-25 21:52:09,734 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:52:10,319 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:52:10,375 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:52:10,378 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 21:52:10,418 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:52:10,419 - ERROR - Error saving attachment: {}
2025-04-25 21:52:10,419 - ERROR - Error saving email log: {}
2025-04-25 21:52:10,419 - ERROR - Error type: APIError
2025-04-25 21:52:10,421 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 21:52:10,421 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 21:52:10,729 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:10,729 - INFO - Is vendor: False
2025-04-25 21:52:10,729 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:52:11,050 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:11,050 - INFO - Is vendor: False
2025-04-25 21:52:11,050 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:11,350 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:11,350 - INFO - Is vendor: False
2025-04-25 21:52:11,350 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:52:11,713 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:11,714 - INFO - Is vendor: False
2025-04-25 21:52:11,714 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:12,120 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:12,120 - INFO - Is vendor: False
2025-04-25 21:52:12,120 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:52:12,427 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:12,427 - INFO - Is vendor: False
2025-04-25 21:52:12,427 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:52:12,758 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:12,758 - INFO - Is vendor: False
2025-04-25 21:52:12,758 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:52:13,144 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:13,145 - INFO - Is vendor: False
2025-04-25 21:52:13,145 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:13,554 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:13,555 - INFO - Is vendor: False
2025-04-25 21:52:13,555 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:13,964 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:13,964 - INFO - Is vendor: False
2025-04-25 21:52:13,964 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:14,372 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:14,373 - INFO - Is vendor: False
2025-04-25 21:52:14,373 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:52:14,784 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:14,784 - INFO - Is vendor: False
2025-04-25 21:52:14,784 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:52:15,192 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:15,193 - INFO - Is vendor: False
2025-04-25 21:52:15,193 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:15,603 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:15,603 - INFO - Is vendor: False
2025-04-25 21:52:15,603 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:16,012 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:16,012 - INFO - Is vendor: False
2025-04-25 21:52:16,012 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:16,422 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:16,422 - INFO - Is vendor: False
2025-04-25 21:52:16,422 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:16,832 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:16,833 - INFO - Is vendor: False
2025-04-25 21:52:16,833 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:17,241 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:17,241 - INFO - Is vendor: False
2025-04-25 21:52:17,241 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 21:52:17,650 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:17,652 - INFO - Is vendor: False
2025-04-25 21:52:17,652 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:17,977 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:17,977 - INFO - Is vendor: False
2025-04-25 21:52:17,977 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:52:18,368 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:18,369 - INFO - Is vendor: False
2025-04-25 21:52:18,369 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 21:52:18,777 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:18,777 - INFO - Is vendor: False
2025-04-25 21:52:18,777 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:19,259 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:19,259 - INFO - Is vendor: False
2025-04-25 21:52:19,259 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:19,595 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:19,596 - INFO - Is vendor: False
2025-04-25 21:52:19,596 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:20,416 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:20,416 - INFO - Is vendor: False
2025-04-25 21:52:20,416 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:20,825 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:20,825 - INFO - Is vendor: False
2025-04-25 21:52:20,826 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:21,234 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:21,234 - INFO - Is vendor: False
2025-04-25 21:52:21,235 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:52:21,644 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:21,644 - INFO - Is vendor: False
2025-04-25 21:52:21,645 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:52:22,053 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:22,054 - INFO - Is vendor: False
2025-04-25 21:52:22,054 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 21:52:22,463 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:22,463 - INFO - Is vendor: False
2025-04-25 21:52:22,464 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:52:22,784 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:22,784 - INFO - Is vendor: False
2025-04-25 21:52:22,784 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:52:23,093 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:52:23,093 - INFO - Is vendor: False
2025-04-25 21:52:23,093 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:52:23,093 - INFO - GmailWatcher initialized
2025-04-25 21:55:47,716 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x116a49fa0>
2025-04-25 21:55:49,595 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:55:49,595 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:55:49,596 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:55:49,596 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:55:49,596 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:55:49,596 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:55:49,596 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:55:49,598 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:55:49,765 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:55:50,550 - INFO - Found 39 messages
2025-04-25 21:55:50,959 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:55:50,959 - INFO - Is vendor: True
2025-04-25 21:55:50,959 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:55:52,294 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:55:53,214 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:55:53,219 - INFO - Generated summary length: 68
2025-04-25 21:55:53,219 - INFO - Generated email type: delay
2025-04-25 21:55:54,034 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:55:54,036 - ERROR - Invalid date format: The latest delivery date mentioned in the email is "April 30, 2025". Therefore, the desired delivery date is "2025-04-30".
2025-04-25 21:55:54,036 - INFO - Parsed delivery date: None
2025-04-25 21:55:54,647 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:55:54,654 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:55:54,658 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:55:54,658 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:55:55,055 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:55:55,055 - INFO - Is vendor: False
2025-04-25 21:55:55,056 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:55:55,465 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:55:55,465 - INFO - Is vendor: True
2025-04-25 21:55:55,466 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:55:59,460 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:56:00,485 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:56:00,487 - INFO - Generated summary length: 68
2025-04-25 21:56:00,487 - INFO - Generated email type: confirmation
2025-04-25 21:56:01,202 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:56:01,204 - INFO - Parsed delivery date: 2025-04-30
2025-04-25 21:56:01,286 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:56:01,289 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:56:01,290 - ERROR - Error sending message to MCP server: [Errno 32] Broken pipe
2025-04-25 21:56:01,291 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:56:01,610 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:01,610 - INFO - Is vendor: False
2025-04-25 21:56:01,610 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:02,019 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:02,019 - INFO - Is vendor: False
2025-04-25 21:56:02,019 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:56:02,428 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:02,428 - INFO - Is vendor: True
2025-04-25 21:56:02,428 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:56:03,622 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:56:04,478 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:56:04,479 - INFO - Generated summary length: 32
2025-04-25 21:56:04,479 - INFO - Generated email type: inquiry
2025-04-25 21:56:05,503 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:56:06,092 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:56:06,099 - INFO - Parsed delivery date: 2024-04-20
2025-04-25 21:56:06,142 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:56:06,144 - INFO - Email saved: purchase request
2025-04-25 21:56:06,178 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:56:06,179 - ERROR - Error saving attachment: {}
2025-04-25 21:56:06,179 - ERROR - Error saving email log: {}
2025-04-25 21:56:06,179 - ERROR - Error type: APIError
2025-04-25 21:56:06,183 - INFO - Message sent to MCP server: purchase request
2025-04-25 21:56:06,183 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 21:56:06,888 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:06,889 - INFO - Is vendor: True
2025-04-25 21:56:06,889 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:56:08,062 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:56:08,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:56:08,881 - INFO - Generated summary length: 52
2025-04-25 21:56:08,881 - INFO - Generated email type: inquiry
2025-04-25 21:56:10,418 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:56:11,082 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:56:11,083 - INFO - Parsed delivery date: 2025-04-22
2025-04-25 21:56:11,132 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:56:11,135 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 21:56:11,166 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:56:11,167 - ERROR - Error saving attachment: {}
2025-04-25 21:56:11,167 - ERROR - Error saving email log: {}
2025-04-25 21:56:11,167 - ERROR - Error type: APIError
2025-04-25 21:56:11,170 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 21:56:11,170 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 21:56:11,542 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:11,543 - INFO - Is vendor: False
2025-04-25 21:56:11,543 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:56:11,952 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:11,952 - INFO - Is vendor: False
2025-04-25 21:56:11,952 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:12,370 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:12,371 - INFO - Is vendor: False
2025-04-25 21:56:12,371 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:56:12,688 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:12,688 - INFO - Is vendor: False
2025-04-25 21:56:12,688 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:13,487 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:13,488 - INFO - Is vendor: False
2025-04-25 21:56:13,488 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:56:13,797 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:13,797 - INFO - Is vendor: False
2025-04-25 21:56:13,797 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:56:14,113 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:14,113 - INFO - Is vendor: False
2025-04-25 21:56:14,113 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:56:14,419 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:14,420 - INFO - Is vendor: False
2025-04-25 21:56:14,420 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:14,819 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:14,819 - INFO - Is vendor: False
2025-04-25 21:56:14,819 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:15,134 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:15,134 - INFO - Is vendor: False
2025-04-25 21:56:15,134 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:15,450 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:15,451 - INFO - Is vendor: False
2025-04-25 21:56:15,451 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:56:15,845 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:15,845 - INFO - Is vendor: False
2025-04-25 21:56:15,845 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:56:16,162 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:16,162 - INFO - Is vendor: False
2025-04-25 21:56:16,163 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:16,557 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:16,557 - INFO - Is vendor: False
2025-04-25 21:56:16,557 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:16,970 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:16,970 - INFO - Is vendor: False
2025-04-25 21:56:16,970 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:17,379 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:17,380 - INFO - Is vendor: False
2025-04-25 21:56:17,380 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:17,789 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:17,789 - INFO - Is vendor: False
2025-04-25 21:56:17,789 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:18,199 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:18,200 - INFO - Is vendor: False
2025-04-25 21:56:18,200 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 21:56:18,609 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:18,609 - INFO - Is vendor: False
2025-04-25 21:56:18,610 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:19,018 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:19,018 - INFO - Is vendor: False
2025-04-25 21:56:19,018 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:56:19,427 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:19,427 - INFO - Is vendor: False
2025-04-25 21:56:19,427 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 21:56:20,130 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:20,130 - INFO - Is vendor: False
2025-04-25 21:56:20,130 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:20,452 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:20,452 - INFO - Is vendor: False
2025-04-25 21:56:20,452 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:21,168 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:21,169 - INFO - Is vendor: False
2025-04-25 21:56:21,169 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:21,579 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:21,579 - INFO - Is vendor: False
2025-04-25 21:56:21,580 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:21,988 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:21,988 - INFO - Is vendor: False
2025-04-25 21:56:21,988 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:22,396 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:22,398 - INFO - Is vendor: False
2025-04-25 21:56:22,398 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:56:22,807 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:22,808 - INFO - Is vendor: False
2025-04-25 21:56:22,808 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:56:23,217 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:23,217 - INFO - Is vendor: False
2025-04-25 21:56:23,217 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 21:56:23,534 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:23,534 - INFO - Is vendor: False
2025-04-25 21:56:23,534 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:56:23,824 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:23,825 - INFO - Is vendor: False
2025-04-25 21:56:23,825 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:56:24,176 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:56:24,177 - INFO - Is vendor: False
2025-04-25 21:56:24,177 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:56:24,177 - INFO - GmailWatcher initialized
2025-04-25 21:58:28,896 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10c54e7b0>
2025-04-25 21:58:30,773 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:58:30,773 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 21:58:30,774 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 21:58:30,774 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 21:58:30,774 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 21:58:30,774 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 21:58:30,774 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:30,776 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 21:58:30,942 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 21:58:31,940 - INFO - Found 39 messages
2025-04-25 21:58:32,349 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:32,349 - INFO - Is vendor: True
2025-04-25 21:58:32,349 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:58:34,106 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:58:35,011 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:35,015 - INFO - Generated summary length: 101
2025-04-25 21:58:35,015 - INFO - Generated email type: update
2025-04-25 21:58:35,831 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:35,833 - ERROR - Invalid date format: The latest delivery date mentioned in the document is: 2025-04-30
2025-04-25 21:58:35,833 - INFO - Parsed delivery date: None
2025-04-25 21:58:36,447 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:58:36,455 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:58:36,461 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:58:36,461 - INFO - Processed email: 196675e9f37b6406
2025-04-25 21:58:36,855 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:36,855 - INFO - Is vendor: False
2025-04-25 21:58:36,856 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:37,168 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:37,168 - INFO - Is vendor: True
2025-04-25 21:58:37,169 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:58:38,339 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:58:39,211 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:39,213 - INFO - Generated summary length: 68
2025-04-25 21:58:39,213 - INFO - Generated email type: confirmation
2025-04-25 21:58:40,031 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:40,033 - INFO - Parsed delivery date: 2025-04-30
2025-04-25 21:58:40,067 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:58:40,070 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:58:40,073 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 21:58:40,073 - INFO - Processed email: 19661ecddae94e49
2025-04-25 21:58:40,440 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:40,440 - INFO - Is vendor: False
2025-04-25 21:58:40,440 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:40,751 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:40,751 - INFO - Is vendor: False
2025-04-25 21:58:40,751 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 21:58:41,063 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:41,063 - INFO - Is vendor: True
2025-04-25 21:58:41,063 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:58:42,077 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:58:42,796 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:42,798 - INFO - Generated summary length: 20
2025-04-25 21:58:42,798 - INFO - Generated email type: order
2025-04-25 21:58:43,792 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:58:44,537 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:44,539 - INFO - Parsed delivery date: None
2025-04-25 21:58:44,586 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:58:44,588 - INFO - Email saved: purchase request
2025-04-25 21:58:44,620 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:58:44,621 - ERROR - Error saving attachment: {}
2025-04-25 21:58:44,621 - ERROR - Error saving email log: {}
2025-04-25 21:58:44,621 - ERROR - Error type: APIError
2025-04-25 21:58:44,622 - INFO - Message sent to MCP server: purchase request
2025-04-25 21:58:44,622 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 21:58:44,946 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:44,946 - INFO - Is vendor: True
2025-04-25 21:58:44,947 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 21:58:46,175 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:58:46,996 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:46,998 - INFO - Generated summary length: 52
2025-04-25 21:58:46,998 - INFO - Generated email type: inquiry
2025-04-25 21:58:48,121 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 21:58:49,075 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 21:58:49,091 - INFO - Parsed delivery date: 2025-04-22
2025-04-25 21:58:49,153 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 21:58:49,156 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 21:58:49,211 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 21:58:49,212 - ERROR - Error saving attachment: {}
2025-04-25 21:58:49,212 - ERROR - Error saving email log: {}
2025-04-25 21:58:49,212 - ERROR - Error type: APIError
2025-04-25 21:58:49,215 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 21:58:49,215 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 21:58:49,553 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:49,553 - INFO - Is vendor: False
2025-04-25 21:58:49,553 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:58:49,963 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:49,963 - INFO - Is vendor: False
2025-04-25 21:58:49,963 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:50,374 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:50,374 - INFO - Is vendor: False
2025-04-25 21:58:50,374 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 21:58:50,781 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:50,781 - INFO - Is vendor: False
2025-04-25 21:58:50,782 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:51,191 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:51,191 - INFO - Is vendor: False
2025-04-25 21:58:51,191 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:58:51,601 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:51,601 - INFO - Is vendor: False
2025-04-25 21:58:51,601 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:58:52,011 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:52,011 - INFO - Is vendor: False
2025-04-25 21:58:52,012 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 21:58:52,830 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:52,831 - INFO - Is vendor: False
2025-04-25 21:58:52,831 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:53,240 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:53,240 - INFO - Is vendor: False
2025-04-25 21:58:53,240 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:58:53,650 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:53,650 - INFO - Is vendor: False
2025-04-25 21:58:53,650 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:54,059 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:54,059 - INFO - Is vendor: False
2025-04-25 21:58:54,059 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:58:54,775 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:54,776 - INFO - Is vendor: False
2025-04-25 21:58:54,776 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 21:58:55,186 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:55,187 - INFO - Is vendor: False
2025-04-25 21:58:55,187 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:58:55,595 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:55,595 - INFO - Is vendor: False
2025-04-25 21:58:55,595 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:56,005 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:56,005 - INFO - Is vendor: False
2025-04-25 21:58:56,005 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:56,346 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:56,346 - INFO - Is vendor: False
2025-04-25 21:58:56,347 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:56,721 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:56,721 - INFO - Is vendor: False
2025-04-25 21:58:56,721 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:57,131 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:57,132 - INFO - Is vendor: False
2025-04-25 21:58:57,132 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 21:58:57,540 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:57,540 - INFO - Is vendor: False
2025-04-25 21:58:57,540 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:58:57,950 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:57,951 - INFO - Is vendor: False
2025-04-25 21:58:57,951 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:58:58,769 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:58,770 - INFO - Is vendor: False
2025-04-25 21:58:58,770 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 21:58:59,478 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:59,478 - INFO - Is vendor: False
2025-04-25 21:58:59,478 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:58:59,794 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:58:59,794 - INFO - Is vendor: False
2025-04-25 21:58:59,794 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:59:00,203 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:00,203 - INFO - Is vendor: False
2025-04-25 21:59:00,203 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:59:00,516 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:00,517 - INFO - Is vendor: False
2025-04-25 21:59:00,517 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:59:00,820 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:00,820 - INFO - Is vendor: False
2025-04-25 21:59:00,821 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:59:01,227 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:01,227 - INFO - Is vendor: False
2025-04-25 21:59:01,227 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 21:59:01,637 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:01,637 - INFO - Is vendor: False
2025-04-25 21:59:01,637 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 21:59:02,046 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:02,046 - INFO - Is vendor: False
2025-04-25 21:59:02,046 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 21:59:02,391 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:02,391 - INFO - Is vendor: False
2025-04-25 21:59:02,391 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 21:59:03,173 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:03,173 - INFO - Is vendor: False
2025-04-25 21:59:03,173 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:59:03,583 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 21:59:03,583 - INFO - Is vendor: False
2025-04-25 21:59:03,583 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 21:59:03,583 - INFO - GmailWatcher initialized
2025-04-25 22:05:31,145 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x107701be0>
2025-04-25 22:05:35,874 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:05:35,875 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:05:35,875 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 22:05:35,875 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 22:05:35,875 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 22:05:35,875 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 22:05:35,875 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:35,877 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 22:05:36,042 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 22:05:36,919 - INFO - Found 39 messages
2025-04-25 22:05:37,639 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:37,639 - INFO - Is vendor: True
2025-04-25 22:05:37,639 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:05:38,766 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:05:39,484 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:39,493 - INFO - Generated summary length: 68
2025-04-25 22:05:39,494 - INFO - Generated email type: delay
2025-04-25 22:05:40,348 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:40,351 - ERROR - Invalid date format: The latest desired delivery date mentioned in the email is: **2025-04-30**.
2025-04-25 22:05:40,351 - INFO - Parsed delivery date: None
2025-04-25 22:05:40,915 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:05:40,923 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:05:40,932 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:05:40,933 - INFO - Processed email: 196675e9f37b6406
2025-04-25 22:05:41,323 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:41,323 - INFO - Is vendor: False
2025-04-25 22:05:41,323 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:42,021 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:42,021 - INFO - Is vendor: True
2025-04-25 22:05:42,021 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:05:43,050 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:05:43,758 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:43,761 - INFO - Generated summary length: 72
2025-04-25 22:05:43,761 - INFO - Generated email type: confirmation
2025-04-25 22:05:44,567 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:44,586 - ERROR - Invalid date format: The latest delivery date mentioned in the email is **2025-04-30**.
2025-04-25 22:05:44,586 - INFO - Parsed delivery date: None
2025-04-25 22:05:44,622 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:05:44,626 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:05:44,627 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:05:44,628 - INFO - Processed email: 19661ecddae94e49
2025-04-25 22:05:44,922 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:44,923 - INFO - Is vendor: False
2025-04-25 22:05:44,923 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:45,317 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:45,318 - INFO - Is vendor: False
2025-04-25 22:05:45,318 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 22:05:45,623 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:45,623 - INFO - Is vendor: True
2025-04-25 22:05:45,623 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:05:46,752 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:05:47,448 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:47,449 - INFO - Generated summary length: 23
2025-04-25 22:05:47,449 - INFO - Generated email type: inquiry
2025-04-25 22:05:48,572 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:05:49,274 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:49,276 - ERROR - Invalid date format: The latest desired delivery date mentioned in the document is: `2024-04-20`.
2025-04-25 22:05:49,276 - INFO - Parsed delivery date: None
2025-04-25 22:05:49,318 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:05:49,322 - INFO - Email saved: purchase request
2025-04-25 22:05:49,356 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:05:49,357 - ERROR - Error saving attachment: {}
2025-04-25 22:05:49,357 - ERROR - Error saving email log: {}
2025-04-25 22:05:49,357 - ERROR - Error type: APIError
2025-04-25 22:05:49,360 - INFO - Message sent to MCP server: purchase request
2025-04-25 22:05:49,361 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 22:05:50,130 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:50,130 - INFO - Is vendor: True
2025-04-25 22:05:50,130 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:05:51,052 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:05:51,810 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:51,812 - INFO - Generated summary length: 57
2025-04-25 22:05:51,812 - INFO - Generated email type: inquiry
2025-04-25 22:05:52,896 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:05:54,024 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:05:54,026 - ERROR - Invalid date format: The latest desired delivery date mentioned in the document is: **2025-04-22**.
2025-04-25 22:05:54,026 - INFO - Parsed delivery date: None
2025-04-25 22:05:54,062 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:05:54,065 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 22:05:54,106 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:05:54,107 - ERROR - Error saving attachment: {}
2025-04-25 22:05:54,107 - ERROR - Error saving email log: {}
2025-04-25 22:05:54,107 - ERROR - Error type: APIError
2025-04-25 22:05:54,111 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 22:05:54,111 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 22:05:54,430 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:54,430 - INFO - Is vendor: False
2025-04-25 22:05:54,430 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:05:54,709 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:54,710 - INFO - Is vendor: False
2025-04-25 22:05:54,710 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:55,046 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:55,046 - INFO - Is vendor: False
2025-04-25 22:05:55,047 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:05:55,352 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:55,353 - INFO - Is vendor: False
2025-04-25 22:05:55,353 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:55,659 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:55,660 - INFO - Is vendor: False
2025-04-25 22:05:55,660 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:05:56,376 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:56,376 - INFO - Is vendor: False
2025-04-25 22:05:56,376 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:05:57,064 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:57,064 - INFO - Is vendor: False
2025-04-25 22:05:57,064 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:05:57,400 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:57,400 - INFO - Is vendor: False
2025-04-25 22:05:57,400 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:57,709 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:57,709 - INFO - Is vendor: False
2025-04-25 22:05:57,710 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:05:58,013 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:58,013 - INFO - Is vendor: False
2025-04-25 22:05:58,013 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:58,305 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:58,305 - INFO - Is vendor: False
2025-04-25 22:05:58,306 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:05:58,629 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:58,630 - INFO - Is vendor: False
2025-04-25 22:05:58,630 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:05:58,936 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:58,936 - INFO - Is vendor: False
2025-04-25 22:05:58,936 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:05:59,231 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:59,232 - INFO - Is vendor: False
2025-04-25 22:05:59,232 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:05:59,938 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:05:59,939 - INFO - Is vendor: False
2025-04-25 22:05:59,939 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:06:00,267 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:00,267 - INFO - Is vendor: False
2025-04-25 22:06:00,267 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:06:00,954 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:00,955 - INFO - Is vendor: False
2025-04-25 22:06:00,955 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:06:01,293 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:01,293 - INFO - Is vendor: False
2025-04-25 22:06:01,293 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 22:06:01,583 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:01,584 - INFO - Is vendor: False
2025-04-25 22:06:01,584 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:06:02,009 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:02,009 - INFO - Is vendor: False
2025-04-25 22:06:02,009 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:06:02,315 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:02,315 - INFO - Is vendor: False
2025-04-25 22:06:02,316 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 22:06:02,623 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:02,623 - INFO - Is vendor: False
2025-04-25 22:06:02,623 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:06:02,930 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:02,931 - INFO - Is vendor: False
2025-04-25 22:06:02,931 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:06:03,340 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:03,340 - INFO - Is vendor: False
2025-04-25 22:06:03,340 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:06:03,646 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:03,646 - INFO - Is vendor: False
2025-04-25 22:06:03,646 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:06:03,937 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:03,937 - INFO - Is vendor: False
2025-04-25 22:06:03,938 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:06:04,228 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:04,228 - INFO - Is vendor: False
2025-04-25 22:06:04,228 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:06:04,520 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:04,521 - INFO - Is vendor: False
2025-04-25 22:06:04,521 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:06:04,876 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:04,876 - INFO - Is vendor: False
2025-04-25 22:06:04,876 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 22:06:05,158 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:05,159 - INFO - Is vendor: False
2025-04-25 22:06:05,159 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:06:05,489 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:05,489 - INFO - Is vendor: False
2025-04-25 22:06:05,489 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:06:05,797 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:06:05,797 - INFO - Is vendor: False
2025-04-25 22:06:05,797 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:06:05,797 - INFO - GmailWatcher initialized
2025-04-25 22:09:57,433 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10c36a000>
2025-04-25 22:10:25,775 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:10:25,775 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:10:25,775 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 22:10:25,775 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 22:10:25,775 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 22:10:25,775 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 22:10:25,775 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:25,777 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 22:10:25,943 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 22:10:26,715 - INFO - Found 39 messages
2025-04-25 22:10:27,134 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:27,134 - INFO - Is vendor: True
2025-04-25 22:10:27,134 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:10:28,471 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:10:29,286 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:29,295 - INFO - Generated summary length: 68
2025-04-25 22:10:29,295 - INFO - Generated email type: delay
2025-04-25 22:10:30,039 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:30,042 - ERROR - Invalid date format: The latest expected delivery date mentioned in the email is **2025-04-30**.
2025-04-25 22:10:30,042 - INFO - Parsed delivery date: None
2025-04-25 22:10:30,617 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:10:30,628 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:10:30,635 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:10:30,635 - INFO - Processed email: 196675e9f37b6406
2025-04-25 22:10:31,027 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:31,027 - INFO - Is vendor: False
2025-04-25 22:10:31,027 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:31,338 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:31,338 - INFO - Is vendor: True
2025-04-25 22:10:31,338 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:10:32,564 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:10:33,384 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:33,386 - INFO - Generated summary length: 71
2025-04-25 22:10:33,386 - INFO - Generated email type: confirmation
2025-04-25 22:10:34,201 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:34,203 - ERROR - Invalid date format: The latest expected delivery date mentioned in the email is **2025-04-30**.
2025-04-25 22:10:34,203 - INFO - Parsed delivery date: None
2025-04-25 22:10:34,294 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:10:34,298 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:10:34,302 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:10:34,302 - INFO - Processed email: 19661ecddae94e49
2025-04-25 22:10:34,712 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:34,712 - INFO - Is vendor: False
2025-04-25 22:10:34,712 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:35,122 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:35,122 - INFO - Is vendor: False
2025-04-25 22:10:35,122 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 22:10:35,531 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:35,531 - INFO - Is vendor: True
2025-04-25 22:10:35,531 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:10:36,762 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:10:37,478 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:37,480 - INFO - Generated summary length: 33
2025-04-25 22:10:37,480 - INFO - Generated email type: inquiry
2025-04-25 22:10:38,109 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:10:38,911 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:38,913 - INFO - Parsed delivery date: None
2025-04-25 22:10:38,970 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:10:38,974 - INFO - Email saved: purchase request
2025-04-25 22:10:39,015 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:10:39,016 - ERROR - Error saving attachment: {}
2025-04-25 22:10:39,016 - ERROR - Error saving email log: {}
2025-04-25 22:10:39,016 - ERROR - Error type: APIError
2025-04-25 22:10:39,018 - INFO - Message sent to MCP server: purchase request
2025-04-25 22:10:39,018 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 22:10:39,833 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:39,833 - INFO - Is vendor: True
2025-04-25 22:10:39,833 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:10:41,371 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:10:42,178 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:42,197 - INFO - Generated summary length: 57
2025-04-25 22:10:42,197 - INFO - Generated email type: inquiry
2025-04-25 22:10:43,109 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:10:43,668 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:10:43,669 - INFO - Parsed delivery date: None
2025-04-25 22:10:43,719 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:10:43,721 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 22:10:43,772 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:10:43,773 - ERROR - Error saving attachment: {}
2025-04-25 22:10:43,773 - ERROR - Error saving email log: {}
2025-04-25 22:10:43,773 - ERROR - Error type: APIError
2025-04-25 22:10:43,775 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 22:10:43,775 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 22:10:44,093 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:44,094 - INFO - Is vendor: False
2025-04-25 22:10:44,094 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:10:44,393 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:44,393 - INFO - Is vendor: False
2025-04-25 22:10:44,393 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:44,693 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:44,694 - INFO - Is vendor: False
2025-04-25 22:10:44,694 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:10:44,996 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:44,996 - INFO - Is vendor: False
2025-04-25 22:10:44,996 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:45,710 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:45,710 - INFO - Is vendor: False
2025-04-25 22:10:45,710 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:10:46,018 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:46,018 - INFO - Is vendor: False
2025-04-25 22:10:46,019 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:10:46,746 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:46,746 - INFO - Is vendor: False
2025-04-25 22:10:46,746 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:10:47,103 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:47,103 - INFO - Is vendor: False
2025-04-25 22:10:47,103 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:47,514 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:47,514 - INFO - Is vendor: False
2025-04-25 22:10:47,514 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:47,835 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:47,835 - INFO - Is vendor: False
2025-04-25 22:10:47,835 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:48,229 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:48,230 - INFO - Is vendor: False
2025-04-25 22:10:48,230 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:10:48,560 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:48,561 - INFO - Is vendor: False
2025-04-25 22:10:48,561 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:10:48,948 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:48,948 - INFO - Is vendor: False
2025-04-25 22:10:48,948 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:49,263 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:49,263 - INFO - Is vendor: False
2025-04-25 22:10:49,263 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:49,579 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:49,580 - INFO - Is vendor: False
2025-04-25 22:10:49,580 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:50,380 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:50,380 - INFO - Is vendor: False
2025-04-25 22:10:50,380 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:50,687 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:50,687 - INFO - Is vendor: False
2025-04-25 22:10:50,687 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:50,995 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:50,995 - INFO - Is vendor: False
2025-04-25 22:10:50,995 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 22:10:51,813 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:51,814 - INFO - Is vendor: False
2025-04-25 22:10:51,814 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:52,121 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:52,121 - INFO - Is vendor: False
2025-04-25 22:10:52,121 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:10:52,425 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:52,426 - INFO - Is vendor: False
2025-04-25 22:10:52,426 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 22:10:53,145 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:53,145 - INFO - Is vendor: False
2025-04-25 22:10:53,145 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:53,864 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:53,864 - INFO - Is vendor: False
2025-04-25 22:10:53,865 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:54,271 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:54,272 - INFO - Is vendor: False
2025-04-25 22:10:54,272 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:54,577 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:54,577 - INFO - Is vendor: False
2025-04-25 22:10:54,577 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:54,987 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:54,988 - INFO - Is vendor: False
2025-04-25 22:10:54,988 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:55,807 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:55,808 - INFO - Is vendor: False
2025-04-25 22:10:55,808 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:10:56,217 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:56,218 - INFO - Is vendor: False
2025-04-25 22:10:56,218 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:10:57,036 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:57,037 - INFO - Is vendor: False
2025-04-25 22:10:57,037 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 22:10:57,446 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:57,446 - INFO - Is vendor: False
2025-04-25 22:10:57,447 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:10:58,165 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:58,165 - INFO - Is vendor: False
2025-04-25 22:10:58,165 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:10:58,573 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:10:58,573 - INFO - Is vendor: False
2025-04-25 22:10:58,573 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:10:58,573 - INFO - GmailWatcher initialized
2025-04-25 22:12:55,561 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10a7c95b0>
2025-04-25 22:13:30,671 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:13:30,671 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:13:30,671 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 22:13:30,671 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 22:13:30,671 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 22:13:30,671 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 22:13:30,671 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:30,673 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 22:13:30,864 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 22:13:31,779 - INFO - Found 39 messages
2025-04-25 22:13:32,100 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:32,101 - INFO - Is vendor: True
2025-04-25 22:13:32,101 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:13:33,188 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:13:33,897 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:33,904 - INFO - Generated summary length: 68
2025-04-25 22:13:33,904 - INFO - Generated email type: delay
2025-04-25 22:13:34,636 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:34,638 - ERROR - Invalid date format: The latest delivery date mentioned in the email is: 2025-04-30
2025-04-25 22:13:34,638 - INFO - Parsed delivery date: None
2025-04-25 22:13:35,666 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:13:35,674 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:13:35,690 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:13:35,690 - INFO - Processed email: 196675e9f37b6406
2025-04-25 22:13:35,995 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:35,995 - INFO - Is vendor: False
2025-04-25 22:13:35,995 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:36,293 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:36,294 - INFO - Is vendor: True
2025-04-25 22:13:36,294 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:13:37,261 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:13:37,967 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:37,980 - INFO - Generated summary length: 68
2025-04-25 22:13:37,981 - INFO - Generated email type: confirmation
2025-04-25 22:13:38,835 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:38,838 - ERROR - Invalid date format: The latest delivery date mentioned in the email is: 2025-04-30
2025-04-25 22:13:38,839 - INFO - Parsed delivery date: None
2025-04-25 22:13:38,881 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:13:38,885 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:13:38,889 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:13:38,889 - INFO - Processed email: 19661ecddae94e49
2025-04-25 22:13:39,192 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:39,192 - INFO - Is vendor: False
2025-04-25 22:13:39,193 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:39,499 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:39,499 - INFO - Is vendor: False
2025-04-25 22:13:39,499 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 22:13:39,802 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:39,802 - INFO - Is vendor: True
2025-04-25 22:13:39,803 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:13:40,677 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:13:41,363 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:41,365 - INFO - Generated summary length: 23
2025-04-25 22:13:41,365 - INFO - Generated email type: inquiry
2025-04-25 22:13:42,331 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:13:42,879 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:42,880 - INFO - Parsed delivery date: 2024-04-20
2025-04-25 22:13:42,931 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:13:42,933 - INFO - Email saved: purchase request
2025-04-25 22:13:42,984 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:13:42,985 - ERROR - Error saving attachment: {}
2025-04-25 22:13:42,985 - ERROR - Error saving email log: {}
2025-04-25 22:13:42,985 - ERROR - Error type: APIError
2025-04-25 22:13:42,987 - INFO - Message sent to MCP server: purchase request
2025-04-25 22:13:42,987 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 22:13:43,295 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:43,295 - INFO - Is vendor: True
2025-04-25 22:13:43,295 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:13:44,599 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:13:45,324 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:45,327 - INFO - Generated summary length: 52
2025-04-25 22:13:45,327 - INFO - Generated email type: inquiry
2025-04-25 22:13:46,253 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:13:46,942 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:13:46,953 - INFO - Parsed delivery date: 2025-04-22
2025-04-25 22:13:47,008 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:13:47,011 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 22:13:47,060 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:13:47,061 - ERROR - Error saving attachment: {}
2025-04-25 22:13:47,061 - ERROR - Error saving email log: {}
2025-04-25 22:13:47,062 - ERROR - Error type: APIError
2025-04-25 22:13:47,065 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 22:13:47,065 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 22:13:47,376 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:47,377 - INFO - Is vendor: False
2025-04-25 22:13:47,377 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:13:47,709 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:47,709 - INFO - Is vendor: False
2025-04-25 22:13:47,709 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:48,412 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:48,412 - INFO - Is vendor: False
2025-04-25 22:13:48,412 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:13:48,712 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:48,712 - INFO - Is vendor: False
2025-04-25 22:13:48,713 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:49,019 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:49,019 - INFO - Is vendor: False
2025-04-25 22:13:49,019 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:13:49,321 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:49,321 - INFO - Is vendor: False
2025-04-25 22:13:49,321 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:13:49,625 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:49,626 - INFO - Is vendor: False
2025-04-25 22:13:49,626 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:13:49,930 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:49,930 - INFO - Is vendor: False
2025-04-25 22:13:49,930 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:50,236 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:50,236 - INFO - Is vendor: False
2025-04-25 22:13:50,236 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:50,546 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:50,546 - INFO - Is vendor: False
2025-04-25 22:13:50,546 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:50,851 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:50,852 - INFO - Is vendor: False
2025-04-25 22:13:50,852 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:13:51,163 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:51,163 - INFO - Is vendor: False
2025-04-25 22:13:51,163 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:13:51,470 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:51,471 - INFO - Is vendor: False
2025-04-25 22:13:51,471 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:51,761 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:51,761 - INFO - Is vendor: False
2025-04-25 22:13:51,761 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:52,069 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:52,069 - INFO - Is vendor: False
2025-04-25 22:13:52,069 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:52,384 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:52,384 - INFO - Is vendor: False
2025-04-25 22:13:52,384 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:53,084 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:53,084 - INFO - Is vendor: False
2025-04-25 22:13:53,084 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:53,394 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:53,394 - INFO - Is vendor: False
2025-04-25 22:13:53,395 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 22:13:53,712 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:53,712 - INFO - Is vendor: False
2025-04-25 22:13:53,713 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:54,021 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:54,021 - INFO - Is vendor: False
2025-04-25 22:13:54,022 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:13:54,335 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:54,335 - INFO - Is vendor: False
2025-04-25 22:13:54,335 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 22:13:54,663 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:54,663 - INFO - Is vendor: False
2025-04-25 22:13:54,663 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:54,970 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:54,970 - INFO - Is vendor: False
2025-04-25 22:13:54,970 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:55,270 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:55,270 - INFO - Is vendor: False
2025-04-25 22:13:55,270 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:55,577 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:55,578 - INFO - Is vendor: False
2025-04-25 22:13:55,578 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:55,884 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:55,885 - INFO - Is vendor: False
2025-04-25 22:13:55,885 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:56,198 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:56,199 - INFO - Is vendor: False
2025-04-25 22:13:56,199 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:13:56,506 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:56,506 - INFO - Is vendor: False
2025-04-25 22:13:56,506 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:13:57,580 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:57,580 - INFO - Is vendor: False
2025-04-25 22:13:57,580 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 22:13:57,892 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:57,892 - INFO - Is vendor: False
2025-04-25 22:13:57,893 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:13:58,202 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:58,202 - INFO - Is vendor: False
2025-04-25 22:13:58,202 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:13:58,498 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:13:58,498 - INFO - Is vendor: False
2025-04-25 22:13:58,498 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:13:58,498 - INFO - GmailWatcher initialized
2025-04-25 22:20:03,959 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10797bb60>
2025-04-25 22:20:05,892 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:20:05,892 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:20:05,893 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 22:20:05,893 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 22:20:05,893 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 22:20:05,893 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 22:20:05,893 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:05,895 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 22:20:06,170 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 22:20:06,939 - INFO - Found 39 messages
2025-04-25 22:20:07,230 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:07,230 - INFO - Is vendor: True
2025-04-25 22:20:07,231 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:20:08,649 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:20:09,306 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:09,313 - INFO - Generated summary length: 68
2025-04-25 22:20:09,313 - INFO - Generated email type: delay
2025-04-25 22:20:09,920 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:09,921 - INFO - Parsed delivery date: 2025-04-30
2025-04-25 22:20:11,043 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:20:11,048 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:20:11,052 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:20:11,052 - INFO - Processed email: 196675e9f37b6406
2025-04-25 22:20:11,455 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:11,455 - INFO - Is vendor: False
2025-04-25 22:20:11,455 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:11,864 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:11,864 - INFO - Is vendor: True
2025-04-25 22:20:11,864 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:20:13,078 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:20:14,016 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:14,017 - INFO - Generated summary length: 72
2025-04-25 22:20:14,017 - INFO - Generated email type: order
2025-04-25 22:20:14,732 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:14,733 - INFO - Parsed delivery date: 2025-04-30
2025-04-25 22:20:14,788 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:20:14,791 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:20:14,793 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:20:14,793 - INFO - Processed email: 19661ecddae94e49
2025-04-25 22:20:15,141 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:15,141 - INFO - Is vendor: False
2025-04-25 22:20:15,141 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:15,560 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:15,560 - INFO - Is vendor: False
2025-04-25 22:20:15,560 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 22:20:15,858 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:15,858 - INFO - Is vendor: True
2025-04-25 22:20:15,858 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:20:17,295 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:20:18,010 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:18,011 - INFO - Generated summary length: 33
2025-04-25 22:20:18,011 - INFO - Generated email type: inquiry
2025-04-25 22:20:18,830 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:20:19,545 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:19,546 - INFO - Parsed delivery date: 2024-04-20
2025-04-25 22:20:19,599 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:20:19,603 - INFO - Email saved: purchase request
2025-04-25 22:20:19,644 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:20:19,645 - ERROR - Error saving attachment: {}
2025-04-25 22:20:19,645 - ERROR - Error saving email log: {}
2025-04-25 22:20:19,645 - ERROR - Error type: APIError
2025-04-25 22:20:19,648 - INFO - Message sent to MCP server: purchase request
2025-04-25 22:20:19,648 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 22:20:19,955 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:19,955 - INFO - Is vendor: True
2025-04-25 22:20:19,955 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:20:21,601 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:20:22,299 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:22,302 - INFO - Generated summary length: 57
2025-04-25 22:20:22,302 - INFO - Generated email type: inquiry
2025-04-25 22:20:23,235 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:20:23,949 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:20:23,951 - INFO - Parsed delivery date: 2025-04-22
2025-04-25 22:20:24,011 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:20:24,014 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 22:20:24,079 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:20:24,080 - ERROR - Error saving attachment: {}
2025-04-25 22:20:24,080 - ERROR - Error saving email log: {}
2025-04-25 22:20:24,080 - ERROR - Error type: APIError
2025-04-25 22:20:24,083 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 22:20:24,083 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 22:20:24,462 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:24,462 - INFO - Is vendor: False
2025-04-25 22:20:24,462 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:20:24,768 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:24,768 - INFO - Is vendor: False
2025-04-25 22:20:24,769 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:25,074 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:25,075 - INFO - Is vendor: False
2025-04-25 22:20:25,075 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:20:25,382 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:25,382 - INFO - Is vendor: False
2025-04-25 22:20:25,382 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:26,100 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:26,100 - INFO - Is vendor: False
2025-04-25 22:20:26,101 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:20:26,815 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:26,816 - INFO - Is vendor: False
2025-04-25 22:20:26,816 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:20:27,122 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:27,122 - INFO - Is vendor: False
2025-04-25 22:20:27,122 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:20:27,430 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:27,430 - INFO - Is vendor: False
2025-04-25 22:20:27,430 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:27,737 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:27,737 - INFO - Is vendor: False
2025-04-25 22:20:27,737 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:28,455 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:28,455 - INFO - Is vendor: False
2025-04-25 22:20:28,455 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:29,171 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:29,171 - INFO - Is vendor: False
2025-04-25 22:20:29,171 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:20:29,479 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:29,479 - INFO - Is vendor: False
2025-04-25 22:20:29,479 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:20:29,785 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:29,785 - INFO - Is vendor: False
2025-04-25 22:20:29,785 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:30,092 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:30,092 - INFO - Is vendor: False
2025-04-25 22:20:30,092 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:30,827 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:30,827 - INFO - Is vendor: False
2025-04-25 22:20:30,827 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:31,219 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:31,220 - INFO - Is vendor: False
2025-04-25 22:20:31,220 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:31,505 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:31,505 - INFO - Is vendor: False
2025-04-25 22:20:31,505 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:31,809 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:31,809 - INFO - Is vendor: False
2025-04-25 22:20:31,809 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 22:20:32,094 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:32,094 - INFO - Is vendor: False
2025-04-25 22:20:32,095 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:32,386 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:32,386 - INFO - Is vendor: False
2025-04-25 22:20:32,387 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:20:32,754 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:32,755 - INFO - Is vendor: False
2025-04-25 22:20:32,755 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 22:20:33,055 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:33,055 - INFO - Is vendor: False
2025-04-25 22:20:33,055 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:33,338 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:33,338 - INFO - Is vendor: False
2025-04-25 22:20:33,338 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:33,636 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:33,636 - INFO - Is vendor: False
2025-04-25 22:20:33,637 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:33,934 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:33,934 - INFO - Is vendor: False
2025-04-25 22:20:33,934 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:34,228 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:34,228 - INFO - Is vendor: False
2025-04-25 22:20:34,228 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:34,599 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:34,599 - INFO - Is vendor: False
2025-04-25 22:20:34,599 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:20:34,892 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:34,892 - INFO - Is vendor: False
2025-04-25 22:20:34,892 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:20:35,315 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:35,315 - INFO - Is vendor: False
2025-04-25 22:20:35,315 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 22:20:36,031 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:36,031 - INFO - Is vendor: False
2025-04-25 22:20:36,031 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:20:36,339 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:36,339 - INFO - Is vendor: False
2025-04-25 22:20:36,339 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:20:36,646 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:20:36,646 - INFO - Is vendor: False
2025-04-25 22:20:36,646 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:20:36,646 - INFO - GmailWatcher initialized
2025-04-25 22:21:23,412 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x120c87230>
2025-04-25 22:31:18,955 - INFO - Vendor CSV path from .env: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:31:18,956 - INFO - Loading vendor emails from: /Users/jiyeon/Desktop/project/ShiftsAI/Procurement/Vendor_list/vendor - 시트1.csv
2025-04-25 22:31:18,956 - INFO - CSV file content:
vendor_email, name, company, position
ddd7913@gmail.com, John, Mega Industrial Supplies Inc., Manager
2025-04-25 22:31:18,957 - INFO - CSV headers: ['vendor_email', ' name', ' company', ' position']
2025-04-25 22:31:18,957 - INFO - Processing row: {'vendor_email': 'ddd7913@gmail.com', ' name': ' John', ' company': ' Mega Industrial Supplies Inc.', ' position': ' Manager'}
2025-04-25 22:31:18,957 - INFO - Added vendor email: ddd7913@gmail.com
2025-04-25 22:31:18,957 - INFO - Loaded 1 vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:18,959 - INFO - file_cache is only supported with oauth2client<4.0.0
2025-04-25 22:31:19,226 - INFO - Searching emails with query: after:2025/01/25
2025-04-25 22:31:20,055 - INFO - Found 39 messages
2025-04-25 22:31:20,342 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:20,342 - INFO - Is vendor: True
2025-04-25 22:31:20,342 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:31:20,632 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:20,632 - INFO - Is vendor: False
2025-04-25 22:31:20,632 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:20,931 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:20,931 - INFO - Is vendor: True
2025-04-25 22:31:20,931 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:31:21,227 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:21,227 - INFO - Is vendor: False
2025-04-25 22:31:21,227 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:21,522 - INFO - Checking email noreply@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:21,522 - INFO - Is vendor: False
2025-04-25 22:31:21,522 - INFO - Non-vendor email skipped: noreply@supabase.com
2025-04-25 22:31:21,900 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:21,900 - INFO - Is vendor: True
2025-04-25 22:31:21,900 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:31:22,188 - INFO - Checking email ddd7913@gmail.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:22,188 - INFO - Is vendor: True
2025-04-25 22:31:22,188 - INFO - Found vendor email: ddd7913@gmail.com
2025-04-25 22:31:22,488 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:22,488 - INFO - Is vendor: False
2025-04-25 22:31:22,488 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:31:22,820 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:22,821 - INFO - Is vendor: False
2025-04-25 22:31:22,821 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:23,127 - INFO - Checking email michaelt@cursor.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:23,127 - INFO - Is vendor: False
2025-04-25 22:31:23,127 - INFO - Non-vendor email skipped: michaelt@cursor.so
2025-04-25 22:31:23,434 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:23,434 - INFO - Is vendor: False
2025-04-25 22:31:23,434 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:23,711 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:23,711 - INFO - Is vendor: False
2025-04-25 22:31:23,711 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:31:23,990 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:23,990 - INFO - Is vendor: False
2025-04-25 22:31:23,990 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:31:24,356 - INFO - Checking email welcome@supabase.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:24,356 - INFO - Is vendor: False
2025-04-25 22:31:24,357 - INFO - Non-vendor email skipped: welcome@supabase.com
2025-04-25 22:31:24,663 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:24,663 - INFO - Is vendor: False
2025-04-25 22:31:24,663 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:24,968 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:24,968 - INFO - Is vendor: False
2025-04-25 22:31:24,968 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:25,278 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:25,278 - INFO - Is vendor: False
2025-04-25 22:31:25,278 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:25,586 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:25,586 - INFO - Is vendor: False
2025-04-25 22:31:25,586 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:31:25,893 - INFO - Checking email your@product.miro.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:25,893 - INFO - Is vendor: False
2025-04-25 22:31:25,893 - INFO - Non-vendor email skipped: your@product.miro.com
2025-04-25 22:31:26,200 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:26,200 - INFO - Is vendor: False
2025-04-25 22:31:26,200 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:26,502 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:26,503 - INFO - Is vendor: False
2025-04-25 22:31:26,503 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:26,814 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:26,814 - INFO - Is vendor: False
2025-04-25 22:31:26,815 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:27,121 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:27,121 - INFO - Is vendor: False
2025-04-25 22:31:27,121 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:27,428 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:27,429 - INFO - Is vendor: False
2025-04-25 22:31:27,429 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:27,720 - INFO - Checking email ivan@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:27,720 - INFO - Is vendor: False
2025-04-25 22:31:27,720 - INFO - Non-vendor email skipped: ivan@mail.notion.so
2025-04-25 22:31:28,016 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:28,016 - INFO - Is vendor: False
2025-04-25 22:31:28,016 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:28,304 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:28,304 - INFO - Is vendor: False
2025-04-25 22:31:28,304 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:31:28,594 - INFO - Checking email drive-shares-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:28,594 - INFO - Is vendor: False
2025-04-25 22:31:28,594 - INFO - Non-vendor email skipped: drive-shares-noreply@google.com
2025-04-25 22:31:28,876 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:28,876 - INFO - Is vendor: False
2025-04-25 22:31:28,876 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:29,165 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:29,165 - INFO - Is vendor: False
2025-04-25 22:31:29,165 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:29,448 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:29,449 - INFO - Is vendor: False
2025-04-25 22:31:29,449 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:29,817 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:29,817 - INFO - Is vendor: False
2025-04-25 22:31:29,817 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:30,099 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:30,099 - INFO - Is vendor: False
2025-04-25 22:31:30,099 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:30,808 - INFO - Checking email team@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:30,808 - INFO - Is vendor: False
2025-04-25 22:31:30,808 - INFO - Non-vendor email skipped: team@mail.notion.so
2025-04-25 22:31:31,092 - INFO - Checking email notify@mail.notion.so against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:31,093 - INFO - Is vendor: False
2025-04-25 22:31:31,093 - INFO - Non-vendor email skipped: notify@mail.notion.so
2025-04-25 22:31:31,422 - INFO - Checking email workspace-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:31,422 - INFO - Is vendor: False
2025-04-25 22:31:31,422 - INFO - Non-vendor email skipped: workspace-noreply@google.com
2025-04-25 22:31:31,831 - INFO - Checking email no-reply@accounts.google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:31,831 - INFO - Is vendor: False
2025-04-25 22:31:31,831 - INFO - Non-vendor email skipped: no-reply@accounts.google.com
2025-04-25 22:31:32,140 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:32,141 - INFO - Is vendor: False
2025-04-25 22:31:32,141 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:31:32,446 - INFO - Checking email mail-noreply@google.com against vendor emails: ['ddd7913@gmail.com']
2025-04-25 22:31:32,447 - INFO - Is vendor: False
2025-04-25 22:31:32,447 - INFO - Non-vendor email skipped: mail-noreply@google.com
2025-04-25 22:31:33,882 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:31:34,699 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:34,705 - INFO - Generated summary length: 101
2025-04-25 22:31:34,705 - INFO - Generated email type: update
2025-04-25 22:31:35,318 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:35,321 - INFO - Parsed delivery date: 2025-04-30
2025-04-25 22:31:35,930 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:31:35,938 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:31:35,950 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:31:35,950 - INFO - Processed email: 196675e9f37b6406
2025-04-25 22:31:37,262 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:31:38,489 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:38,492 - INFO - Generated summary length: 64
2025-04-25 22:31:38,492 - INFO - Generated email type: request
2025-04-25 22:31:39,616 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:31:40,230 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:40,232 - INFO - Parsed delivery date: 2025-04-22
2025-04-25 22:31:40,318 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:31:40,322 - INFO - Email saved: [purchase request]I want to purchase some stuffs
2025-04-25 22:31:40,367 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:31:40,368 - ERROR - Error saving attachment: {}
2025-04-25 22:31:40,368 - ERROR - Error saving email log: {}
2025-04-25 22:31:40,368 - ERROR - Error type: APIError
2025-04-25 22:31:40,371 - INFO - Message sent to MCP server: [purchase request]I want to purchase some stuffs
2025-04-25 22:31:40,371 - INFO - Processed email: 1965e3ccd4a098a9
2025-04-25 22:31:41,460 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:31:42,687 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:42,691 - INFO - Generated summary length: 33
2025-04-25 22:31:42,691 - INFO - Generated email type: inquiry
2025-04-25 22:31:43,610 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:31:44,529 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:44,530 - INFO - Parsed delivery date: 2024-04-20
2025-04-25 22:31:44,606 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:31:44,607 - INFO - Email saved: purchase request
2025-04-25 22:31:44,647 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_attachments "HTTP/1.1 404 Not Found"
2025-04-25 22:31:44,647 - ERROR - Error saving attachment: {}
2025-04-25 22:31:44,647 - ERROR - Error saving email log: {}
2025-04-25 22:31:44,647 - ERROR - Error type: APIError
2025-04-25 22:31:44,648 - INFO - Message sent to MCP server: purchase request
2025-04-25 22:31:44,649 - INFO - Processed email: 1965e3ffd06abe66
2025-04-25 22:31:45,761 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-04-25 22:31:46,502 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:46,506 - INFO - Generated summary length: 68
2025-04-25 22:31:46,506 - INFO - Generated email type: confirmation
2025-04-25 22:31:47,142 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-25 22:31:47,147 - INFO - Parsed delivery date: 2025-04-30
2025-04-25 22:31:47,192 - INFO - HTTP Request: POST https://ujvbinqvvgbzgwqluian.supabase.co/rest/v1/email_logs "HTTP/1.1 201 Created"
2025-04-25 22:31:47,195 - INFO - Email saved: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:31:47,198 - INFO - Message sent to MCP server: Re: [Purchase Order Attached] Request for Supply – Shiftsai
2025-04-25 22:31:47,198 - INFO - Processed email: 19661ecddae94e49
2025-04-25 22:31:47,198 - INFO - GmailWatcher initialized
